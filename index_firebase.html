<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Your Name | Portfolio„ÉªBlog„ÉªPolls„ÉªInteractive</title>
  <meta name="description" content="A simple website for your resume, articles, polls, comments, and sharing." />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>üóÇÔ∏è</text></svg>">
  <style>
    :root{
      --bg:#ffffff;--card:#f8fafc;--text:#0f172a;--muted:#475569;--brand:#2563eb;--brand-2:#1d4ed8;--line:#e2e8f0;--ok:#16a34a;--warn:#f59e0b;--danger:#dc2626
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;font-family: system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,Apple Color Emoji,Segoe UI Emoji; color:var(--text); background:var(--bg)}
    a{color:var(--brand);text-decoration:none}
    a:hover{text-decoration:underline}
    .container{max-width:1100px;margin:0 auto;padding:24px}
    header{display:flex;gap:16px;align-items:center;justify-content:space-between;padding:16px 0}
    .brand{font-weight:800;font-size:20px}
    .nav{display:flex;gap:12px;flex-wrap:wrap}
    .nav a{padding:8px 12px;border:1px solid var(--line);border-radius:999px;color:var(--muted)}
    .hero{background:var(--card);border:1px solid var(--line);border-radius:16px;padding:16px}
    .headline{position:relative;height:320px;border-radius:12px;overflow:hidden;background:#000}
    .headline-slide{position:absolute;inset:0;display:none}
    .headline-slide.active{display:block}
    .headline-slide img{width:100%;height:100%;object-fit:cover;filter:brightness(0.8)}
    .headline-caption{position:absolute;left:16px;bottom:16px;right:16px;color:#fff;background:rgba(0,0,0,.45);padding:12px 16px;border-radius:10px}
    .grid{display:grid;grid-template-columns:1.2fr .8fr;gap:16px}
    @media (max-width:900px){.grid{grid-template-columns:1fr}}

    /* Profile / Resume */
    .card{background:var(--card);border:1px solid var(--line);border-radius:16px;padding:16px}
    .profile{display:flex;gap:16px;align-items:center}
    .avatar{width:72px;height:72px;border-radius:50%;object-fit:cover;border:2px solid #fff;box-shadow:0 2px 8px rgba(0,0,0,.08)}

    /* Tabs */
    .tabs{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
    .tab{padding:8px 12px;border:1px solid var(--line);border-radius:999px;background:#fff;color:var(--muted);cursor:pointer}
    .tab.active{background:var(--brand);color:#fff;border-color:var(--brand)}

    /* Posts list */
    .post{display:flex;gap:12px;padding:12px;border-bottom:1px solid var(--line)}
    .post:last-child{border-bottom:none}
    .thumb{width:120px;height:80px;border-radius:10px;object-fit:cover}
    .post h4{margin:0 0 6px 0}
    .meta{font-size:12px;color:var(--muted)}

    /* Poll */
    .poll-option{display:flex;align-items:center;gap:10px;margin:8px 0}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:10px;border:1px solid var(--line);background:#fff;cursor:pointer}
    .btn.primary{background:var(--brand);color:#fff;border-color:var(--brand)}
    .progress{height:8px;background:#e5e7eb;border-radius:999px;overflow:hidden}
    .bar{height:100%;background:var(--brand-2)}

    /* Article modal */
    .modal{position:fixed;inset:0;background:rgba(0,0,0,.35);display:none;align-items:center;justify-content:center;padding:16px}
    .modal.open{display:flex}
    .modal-card{background:#fff;max-width:760px;width:100%;max-height:90vh;overflow:auto;border-radius:16px;border:1px solid var(--line)}
    .modal-head{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;border-bottom:1px solid var(--line)}
    .modal-body{padding:16px}

    /* Interactions */
    .interact{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-top:16px}
    .chip{display:inline-flex;align-items:center;gap:6px;border:1px solid var(--line);border-radius:999px;padding:6px 10px;cursor:pointer;color:var(--muted)}
    .chip.liked{background:#eef2ff;border-color:#c7d2fe;color:#3730a3}
    .comments{margin-top:14px}
    .comment{border-top:1px solid var(--line);padding:10px 0}
    .comment:first-child{border-top:none}

    /* Floating contact */
    .float-contact{position:fixed;right:16px;bottom:16px;background:var(--ok);color:#fff;padding:12px 14px;border-radius:999px;box-shadow:0 8px 24px rgba(22,163,74,.35);display:flex;gap:8px;align-items:center}

    footer{color:var(--muted);font-size:12px;padding:24px 0}
    .small{font-size:12px;color:var(--muted)}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">Your NameÔΩúPortfolio & Blog</div>
      <nav class="nav">
        <a href="#resume">Resume</a>
        <a href="#posts">Articles</a>
        <a href="#polls">Polls</a>
        <a href="https://www.linkedin.com/in/your-linkedin" target="_blank" rel="noopener">LinkedIn</a>
      </nav>
    </header>

    <section class="hero" id="top">
      <div class="headline" id="headline"></div>
      <div class="small" style="margin-top:8px">Headline: Displays up to 5 articles marked as isHeadline</div>
    </section>

    <div class="grid" style="margin-top:16px">
      <section class="card" id="posts">
        <h3 style="margin:0 0 4px 0">Articles & Categories</h3>
        <div class="tabs" id="tabs"></div>
        <div id="postList" style="margin-top:8px"></div>
      </section>

      <aside class="card" id="resume">
        <h3 style="margin-top:0">About Me</h3>
        <div class="profile">
          <img class="avatar" src="./avatar.jpg" alt="avatar" onerror="this.src='https://picsum.photos/200'" />
          <div>
            <div style="font-weight:700">Your Name</div>
            <div class="small">GTMÔΩúProduct StrategyÔΩúContent Creation</div>
            <div style="margin-top:8px">
              <a class="btn" href="https://www.linkedin.com/in/your-linkedin" target="_blank" rel="noopener">LinkedIn</a>
              <a class="btn" href="./resume.pdf" target="_blank" rel="noopener">Download Resume</a>
            </div>
          </div>
        </div>
        <hr style="border:none;border-top:1px solid var(--line);margin:16px 0" />
        <section id="polls">
          <h4 style="margin:0 0 8px 0">Homepage Polls</h4>
          <div id="pollContainer"></div>
        </section>
      </aside>
    </div>

    <footer>
      ¬© <span id="year"></span> Your Name. All rights reserved.
    </footer>
  </div>

  <!-- Article Modal -->
  <div class="modal" id="articleModal" aria-hidden="true">
    <div class="modal-card">
      <div class="modal-head">
        <strong id="modalTitle">Article Title</strong>
        <button class="btn" id="closeModal">Close</button>
      </div>
      <div class="modal-body" id="modalBody"></div>
    </div>
  </div>

  <!-- Floating contact button -->
  <a class="float-contact" href="mailto:you@email.com?subject=Website Contact" aria-label="email">
    <span>‚úâÔ∏è Contact Me</span>
  </a>

  <!-- Firebase SDKs -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
    import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
    import { getFirestore, doc, getDoc, setDoc, updateDoc, onSnapshot, collection, query, addDoc, serverTimestamp, arrayUnion } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

    // ======= Global Variables from environment =======
    const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
    const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
    const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : '';

    let db;
    let auth;
    let userId;

    // ======= Content Data (You only need to update here) =======
    const DATA = {
      categories: ["Business","Technology","Lifestyle"],
      posts: [
        {
          id: "2025-08-10-hello-world",
          title: "My Headline Article: AI and GTM Strategy",
          date: "2025-08-10",
          category: "Technology",
          coverImage: "https://images.unsplash.com/photo-1518779578993-ec3579fee39f?q=80&w=1600&auto=format&fit=crop",
          summary: "A complete consideration from pipeline to performance.",
          isHeadline: true,
          content: `
            <p>This is a sample article content. You can paste long articles directly into the <code>content</code> field, or load Markdown converted to HTML.</p>
            <p>Supports <strong>bold</strong>, <em>italic</em>, and links.</p>
          `
        },
        {
          id: "2025-08-12-business-notes",
          title: "The Intersection of Investment and Product",
          date: "2025-08-12",
          category: "Business",
          coverImage: "https://images.unsplash.com/photo-1553729459-efe14ef6055d?q=80&w=1600&auto=format&fit=crop",
          summary: "How to correct business models and product decisions with each other.",
          isHeadline: true,
          content: `<p>Sample paragraph for business thinking and product implementation.</p>`
        },
        {
          id: "2025-08-14-life-habits",
          title: "Habit Formation and Learning Efficiency",
          date: "2025-08-14",
          category: "Lifestyle",
          coverImage: "https://images.unsplash.com/photo-1506784983877-45594efa4cbe?q=80&w=1600&auto=format&fit=crop",
          summary: "Start with the Minimum Viable Step, and iterate continuously.",
          isHeadline: false,
          content: `<p>Sample content for a lifestyle article.</p>`
        }
      ],
      polls: [
        {
          id: "poll-ai-work",
          title: "Will AI replace most jobs?",
          description: "Exploring the impact of artificial intelligence on future work.",
          options: [
            { label: "Yes, most jobs will be replaced" },
            { label: "No, human creativity is irreplaceable" },
            { label: "Uncertain, need to wait and see" }
          ]
        }
      ]
    }

    // ======= Utilities =======
    const $ = (sel, root=document) => root.querySelector(sel)
    const $$ = (sel, root=document) => Array.from(root.querySelectorAll(sel))
    const byId = id => document.getElementById(id)
    const storage = {
      get(key, fallback){ try{ return JSON.parse(localStorage.getItem(key)) ?? fallback }catch{ return fallback } },
      set(key, val){ localStorage.setItem(key, JSON.stringify(val)) }
    }
    const YEAR_EL = byId('year'); YEAR_EL.textContent = new Date().getFullYear()

    let likeCounts = {};
    let userVotes = {};
    let comments = {};

    // ======= Firebase Initialization =======
    async function setupFirebase() {
      try {
        const app = initializeApp(firebaseConfig);
        db = getFirestore(app);
        auth = getAuth(app);

        // Sign in with custom token or anonymously if not provided
        if (initialAuthToken) {
          await signInWithCustomToken(auth, initialAuthToken);
        } else {
          await signInAnonymously(auth);
        }

        onAuthStateChanged(auth, async (user) => {
          if (user) {
            userId = user.uid;
            console.log("Firebase initialized. User ID:", userId);
            // Now that we have a user, we can set up listeners
            setupFirestoreListeners();
          } else {
            console.log("No user signed in.");
          }
        });
      } catch (error) {
        console.error("Firebase initialization error:", error);
      }
    }

    // ======= Firestore Listeners =======
    function setupFirestoreListeners() {
      // Listener for likes
      const likesCollectionRef = collection(db, `artifacts/${appId}/public/data/likes`);
      onSnapshot(likesCollectionRef, (snapshot) => {
        snapshot.docs.forEach(doc => {
          likeCounts[doc.id] = doc.data();
        });
        renderPosts();
        // Update modal if open
        if(modal.classList.contains('open')) {
          const articleId = byId('modalBody').dataset.articleId;
          updateModalInteractions(articleId);
          renderComments(articleId);
        }
      }, (error) => {
        console.error("Error listening to likes:", error);
      });
      // Listener for polls
      const pollsCollectionRef = collection(db, `artifacts/${appId}/public/data/polls`);
      onSnapshot(pollsCollectionRef, (snapshot) => {
        snapshot.docs.forEach(doc => {
          const pollData = doc.data();
          const localPoll = DATA.polls.find(p => p.id === doc.id);
          if (localPoll) {
            localPoll.options = pollData.options;
          }
        });
        renderPolls();
      }, (error) => {
        console.error("Error listening to polls:", error);
      });
      // Listener for comments
      const commentsCollectionRef = collection(db, `artifacts/${appId}/public/data/comments`);
      onSnapshot(commentsCollectionRef, (snapshot) => {
        snapshot.docs.forEach(doc => {
            const docData = doc.data();
            comments[doc.id] = docData.list || [];
        });
        renderComments(byId('modalBody').dataset.articleId);
      }, (error) => {
        console.error("Error listening to comments:", error);
      });
    }

    // ======= Firestore Operations =======
    async function toggleLike(postId) {
      if (!db || !userId) return console.log("Firebase not ready.");

      const postRef = doc(db, `artifacts/${appId}/public/data/likes`, postId);
      try {
        const postSnap = await getDoc(postRef);
        let likeData = postSnap.exists() ? postSnap.data() : { count: 0, users: [] };
        const userHasLiked = likeData.users.includes(userId);

        if (userHasLiked) {
          likeData.count--;
          likeData.users = likeData.users.filter(id => id !== userId);
        } else {
          likeData.count++;
          likeData.users.push(userId);
        }

        await setDoc(postRef, likeData, { merge: true });
        console.log(`Like toggled for post ${postId}`);
      } catch (e) {
        console.error("Error toggling like:", e);
      }
    }

    async function addComment(postId, text) {
        if (!db || !userId) return console.log("Firebase not ready.");

        const postRef = doc(db, `artifacts/${appId}/public/data/comments`, postId);
        try {
            await setDoc(postRef, {
                list: arrayUnion({
                    id: crypto.randomUUID(),
                    name: `Guest-${userId.slice(0, 4)}`, // Use a short ID for display
                    text: text,
                    ts: serverTimestamp()
                })
            }, { merge: true });
        } catch (e) {
            console.error("Error adding comment:", e);
        }
    }

    async function castVote(pollId, optionIndex) {
        if (!db || !userId) return console.log("Firebase not ready.");

        const userDocRef = doc(db, `artifacts/${appId}/users/${userId}/votes`, pollId);
        const pollDocRef = doc(db, `artifacts/${appId}/public/data/polls`, pollId);

        try {
          const userVoteSnap = await getDoc(userDocRef);
          if (userVoteSnap.exists()) {
            alert("You have already voted in this poll!");
            return;
          }

          const pollSnap = await getDoc(pollDocRef);
          let pollData = pollSnap.exists() ? pollSnap.data() : DATA.polls.find(p => p.id === pollId);
          if (!pollData) {
            console.error("Poll data not found.");
            return;
          }

          if (!pollSnap.exists()) {
              // Initialize poll data if it doesn't exist
              pollData.options = pollData.options.map(o => ({...o, votes: 0}));
          }

          pollData.options[optionIndex].votes += 1;

          await setDoc(pollDocRef, pollData);
          await setDoc(userDocRef, { option: optionIndex, timestamp: serverTimestamp() });
          console.log(`Vote cast for poll ${pollId}`);
        } catch (e) {
          console.error("Error casting vote:", e);
        }
    }


    // ======= Headline carousel =======
    function renderHeadlines(){
      const wrap = byId('headline');
      wrap.innerHTML = ''
      const heads = DATA.posts.filter(p=>p.isHeadline).slice(0,5)
      heads.forEach((p,i)=>{
        const slide = document.createElement('div');
        slide.className = 'headline-slide'+(i===0?' active':'')
        slide.innerHTML = `
          <img src="${p.coverImage}" alt="${p.title}" />
          <div class="headline-caption">
            <div style="font-weight:700;font-size:18px">${p.title}</div>
            <div class="small">${p.summary}</div>
            <div style="margin-top:8px"><button class="btn primary" data-article="${p.id}">Read Full Article</button></div>
          </div>`
        wrap.appendChild(slide)
      })
      // autoplay
      let i=0; setInterval(()=>{
        const slides = $$('.headline-slide', wrap)
        slides.forEach(s=>s.classList.remove('active'))
        i = (i+1)%slides.length
        slides[i].classList.add('active')
      }, 5000)

      wrap.addEventListener('click', e=>{
        if(e.target.matches('[data-article]')){
          openArticle(e.target.dataset.article)
        }
      })
    }

    // ======= Tabs & Posts =======
    function renderTabs(){
      const tabs = byId('tabs'); tabs.innerHTML=''
      const allCats = ['All', ...DATA.categories]
      const current = storage.get('tab', 'All')
      allCats.forEach(cat=>{
        const el = document.createElement('button');
        el.className = 'tab'+(current===cat?' active':'')
        el.textContent = cat
        el.dataset.cat = cat
        tabs.appendChild(el)
      })

      tabs.addEventListener('click', e=>{
        if(e.target.classList.contains('tab')){
          $$('.tab', tabs).forEach(t=>t.classList.remove('active'))
          e.target.classList.add('active')
          storage.set('tab', e.target.dataset.cat)
          renderPosts()
        }
      })
    }

    function renderPosts(){
      const cat = storage.get('tab','All')
      const list = byId('postList'); list.innerHTML=''
      let posts = [...DATA.posts].sort((a,b)=>new Date(b.date)-new Date(a.date))
      if(cat!=="All") posts = posts.filter(p=>p.category===cat)

      posts.forEach(p=>{
        const likeData = likeCounts[p.id] || { count: 0, users: [] };
        const userHasLiked = likeData.users.includes(userId);
        const row = document.createElement('div');
        row.className = 'post'
        row.innerHTML = `
          <img class="thumb" src="${p.coverImage}" alt="${p.title}" />
          <div style="flex:1">
            <h4>${p.title}</h4>
            <div class="meta">${p.date} „Éª ${p.category}</div>
            <p class="small">${p.summary}</p>
            <div class="interact">
              <button class="chip like ${userHasLiked ? 'liked' : ''}" data-like="${p.id}">üëç <span>${likeData.count}</span></button>
              <button class="chip" data-share="${p.id}">üîó Share</button>
              <button class="chip" data-open="${p.id}">Read</button>
            </div>
          </div>`
        list.appendChild(row)
      })

      list.addEventListener('click', onPostListClick)
    }

    function onPostListClick(e){
      const likeBtn = e.target.closest('[data-like]')
      const shareBtn = e.target.closest('[data-share]')
      const openBtn = e.target.closest('[data-open]')
      if(likeBtn){ toggleLike(likeBtn.dataset.like) }
      if(shareBtn){ shareArticle(shareBtn.dataset.share) }
      if(openBtn){ openArticle(openBtn.dataset.open) }
    }

    // ======= Share =======
    function shareArticle(id){
      const post = DATA.posts.find(p=>p.id===id)
      const url = location.origin + location.pathname + `#${id}`
      if(navigator.share){
        navigator.share({ title: post.title, text: post.summary, url })
      } else {
        navigator.clipboard.writeText(url)
        alert('Link copied to clipboard:\n' + url)
      }
    }

    // ======= Article Modal (with comments) =======
    const modal = byId('articleModal')
    const modalBody = byId('modalBody')
    byId('closeModal').onclick = ()=> modal.classList.remove('open')
    modal.addEventListener('click', e=>{ if(e.target===modal) modal.classList.remove('open') })

    function openArticle(id){
      const p = DATA.posts.find(x=>x.id===id)
      if(!p) return

      byId('modalTitle').textContent = p.title
      modalBody.dataset.articleId = id; // Store the current article ID

      modalBody.innerHTML = `
        <img src="${p.coverImage}" alt="${p.title}" style="width:100%;border-radius:10px;object-fit:cover;max-height:320px"/>
        <div class="meta" style="margin-top:8px">${p.date} „Éª ${p.category}</div>
        <div style="margin-top:12px">${p.content}</div>
        <div class="interact" id="modal-interact-${p.id}"></div>
        <div class="comments" id="c-${p.id}">
          <h4>Comments</h4>
          <div id="commentList-${p.id}"></div>
          <div style="display:flex;gap:8px;margin-top:8px">
            <input id="commentInput-${p.id}" placeholder="Leave your thoughts‚Ä¶" style="flex:1;padding:8px;border:1px solid var(--line);border-radius:8px"/>
            <button class="btn primary" data-send="${p.id}">Submit</button>
          </div>
        </div>
      `
      updateModalInteractions(id);
      renderComments(id);

      modal.classList.add('open')

      modalBody.onclick = (e)=>{
        const likeBtn = e.target.closest('[data-like]')
        const shareBtn = e.target.closest('[data-share]')
        const sendBtn = e.target.closest('[data-send]')
        if(likeBtn){ toggleLike(id); }
        if(shareBtn){ shareArticle(id) }
        if(sendBtn){
          const input = byId(`commentInput-${id}`)
          const text = input.value.trim()
          if(text){ addComment(id, text); input.value=''; }
        }
      }

      location.hash = id
    }

    function updateModalInteractions(id) {
        const p = DATA.posts.find(x => x.id === id);
        if (!p) return;
        const interactEl = byId(`modal-interact-${id}`);
        const likeData = likeCounts[id] || { count: 0, users: [] };
        const userHasLiked = likeData.users.includes(userId);
        interactEl.innerHTML = `
            <button class="chip like ${userHasLiked ? 'liked' : ''}" data-like="${p.id}">üëç <span>${likeData.count}</span></button>
            <button class="chip" data-share="${p.id}">üîó Share</button>
        `;
    }

    // ======= Comments =======
    function renderComments(id){
      const list = byId(`commentList-${id}`)
      if(!list) return;

      const postComments = comments[id] || [];
      const sortedComments = postComments.sort((a,b) => b.ts.seconds - a.ts.seconds);

      list.innerHTML = sortedComments.map(c=>{
          const date = c.ts ? new Date(c.ts.seconds * 1000).toLocaleString() : 'N/A';
          const name = escapeHTML(c.name);
          const text = escapeHTML(c.text);
          return `<div class="comment"><div class="small">${date}ÔΩú${name}</div><div>${text}</div></div>`;
      }).join('') || `<div class="small">Be the first to leave a comment!</div>`;
    }

    function escapeHTML(s){
      return (s || '').replace(/[&<>'"]/g, (c)=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;","\"":"&quot;"}[c]))
    }

    // ======= Polls =======
    function renderPolls(){
      const box = byId('pollContainer'); box.innerHTML = ''
      DATA.polls.forEach(p=>{
        const pollData = p;
        const total = pollData.options.reduce((s,o)=>s+(o.votes || 0), 0);

        const wrap = document.createElement('div');
        wrap.className = 'card';
        wrap.style.marginTop = '8px';
        wrap.innerHTML = `
          <div style="font-weight:600">${p.title}</div>
          <div class="small" style="margin:4px 0 8px 0">${p.description}</div>
          <div>${p.options.map((o,idx)=>{
            const pct = total? Math.round((o.votes || 0)*100/total) : 0
            const voted = userVotes[p.id] === idx;
            const disabled = userVotes[p.id] !== undefined;

            return `<div class='poll-option'>
              <input type='radio' name='${p.id}' value='${idx}' ${voted? 'checked':''} ${disabled? 'disabled':''} />
              <label style='flex:1'>${o.label}
                <div class='progress'><div class='bar' style='width:${pct}%' ></div></div>
                <span class='small'>${total? pct:0}%Ôºà${o.votes || 0}Ôºâ</span>
              </label>
            </div>`
          }).join('')}</div>
          <div style="margin-top:8px;display:flex;gap:8px">
            <button class="btn primary" data-vote='${p.id}' ${userVotes[p.id] !== undefined ? 'disabled':''}>Vote</button>
            <span class="small">${total} votes</span>
          </div>
        `
        box.appendChild(wrap)
      })

      box.addEventListener('click', e=>{
        const btn = e.target.closest('[data-vote]')
        if(!btn) return
        const pollId = btn.dataset.vote
        const poll = DATA.polls.find(x=>x.id===pollId)
        const checked = box.querySelector(`input[name='${pollId}']:checked`)
        if(!checked){ alert('Please select an option first'); return }
        const idx = Number(checked.value)
        castVote(pollId, idx);
      })
    }

    // ======= Init =======
    function init(){
      renderHeadlines();
      renderTabs();
      renderPosts();
      renderPolls();
      setupFirebase();
      // Open modal if hash points to an article
      if(location.hash){
        const id = location.hash.replace('#','')
        if(DATA.posts.some(p=>p.id===id)) openArticle(id)
      }
    }

    init()
  </script>
</body>
</html>

